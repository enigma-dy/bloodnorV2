{"openapi":"3.0.0","paths":{"/":{"get":{"operationId":"AppController_getHello","parameters":[],"responses":{"200":{"description":""}},"tags":["App"]}},"/auth/login":{"post":{"operationId":"AuthController_login","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginUserDto"}}}},"responses":{"200":{"description":"Login successful"},"400":{"description":"Invalid credentials"}},"summary":"User login","tags":["Auth"]}},"/auth/google":{"get":{"operationId":"AuthController_googleAuth","parameters":[],"responses":{"200":{"description":""}},"summary":"Initiate Google OAuth flow","tags":["Auth"]}},"/auth/google/redirect":{"get":{"operationId":"AuthController_googleAuthRedirect","parameters":[],"responses":{"200":{"description":"Google login successful"}},"summary":"Google OAuth callback","tags":["Auth"]}},"/users/register":{"post":{"operationId":"UsersController_register","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateUserDto"}}}},"responses":{"201":{"description":"User registration successful."},"400":{"description":"Blood group does not exist or validation failed."}},"summary":"Register a new user","tags":["users"]}},"/users/all":{"get":{"operationId":"UsersController_getUsers","parameters":[{"name":"search","required":false,"in":"query","schema":{"type":"string"}},{"name":"bloodType","required":false,"in":"query","schema":{"type":"string"}},{"name":"userType","required":false,"in":"query","schema":{"enum":["SUPER_ADMIN","DONOR","PATIENT","STAFF"],"type":"string"}},{"name":"minAge","required":false,"in":"query","schema":{"type":"number"}},{"name":"maxAge","required":false,"in":"query","schema":{"type":"number"}},{"name":"country","required":false,"in":"query","schema":{"type":"string"}},{"name":"startDate","required":false,"in":"query","description":"Start date ISO string","schema":{"type":"string"}},{"name":"endDate","required":false,"in":"query","description":"End date ISO string","schema":{"type":"string"}},{"name":"page","required":false,"in":"query","schema":{"type":"number"}},{"name":"limit","required":false,"in":"query","schema":{"type":"number"}}],"responses":{"200":{"description":""}},"summary":"Get list of users with optional filters","tags":["users"]}},"/users/me":{"get":{"operationId":"UsersController_getMe","parameters":[],"responses":{"200":{"description":""}},"security":[{"bearer":[]}],"summary":"Get current logged-in user profile","tags":["users"]}},"/users/{id}":{"get":{"operationId":"UsersController_getUserById","parameters":[],"responses":{"200":{"description":"User found."},"404":{"description":"User not found."}},"summary":"Get user by ID","tags":["users"]}},"/users/update":{"put":{"operationId":"UsersController_updateUser","parameters":[],"responses":{"200":{"description":""}},"security":[{"bearer":[]}],"summary":"Update current logged-in user profile","tags":["users"]}},"/blood-type/create":{"post":{"operationId":"BloodTypeController_createBlood","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/BloodGroupDto"}}}},"responses":{"201":{"description":"Blood type successfully created."},"400":{"description":"Invalid input or error creating blood type."}},"summary":"Create a new blood type","tags":["BloodType"]}},"/role/create":{"post":{"operationId":"RoleController_createRole","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateRoleDto"}}}},"responses":{"201":{"description":"Role successfully created."},"400":{"description":"Invalid input or error creating role."}},"summary":"Create a new role","tags":["Role"]}},"/role/get/{id}":{"get":{"operationId":"RoleController_getRole","parameters":[{"name":"id","required":true,"in":"path","description":"Role ID","schema":{"type":"number"}}],"responses":{"200":{"description":"Role found."},"400":{"description":"Invalid role ID."},"404":{"description":"Role not found."}},"summary":"Get a role by ID","tags":["Role"]}},"/role/all":{"get":{"operationId":"RoleController_getAllRoles","parameters":[{"name":"hospitalId","required":false,"in":"query","description":"Hospital ID to filter roles","schema":{"type":"string"}}],"responses":{"200":{"description":"List of roles."},"400":{"description":"Error retrieving roles."}},"summary":"Get all roles optionally filtered by hospital ID","tags":["Role"]}},"/role/update/{id}":{"patch":{"operationId":"RoleController_updateRole","parameters":[{"name":"id","required":true,"in":"path","description":"Role ID","schema":{"type":"number"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateRoleDto"}}}},"responses":{"200":{"description":"Role updated successfully."},"400":{"description":"Invalid input or error updating role."}},"summary":"Update a role by ID","tags":["Role"]}},"/role/delete/{id}":{"delete":{"operationId":"RoleController_deleteRole","parameters":[{"name":"id","required":true,"in":"path","description":"Role ID","schema":{"type":"number"}}],"responses":{"204":{"description":"Role deleted successfully."},"400":{"description":"Error deleting role."}},"summary":"Delete a role by ID","tags":["Role"]}},"/role/assign/{id}":{"put":{"operationId":"RoleController_assignPermissions","parameters":[{"name":"id","required":true,"in":"path","description":"Role ID","schema":{"type":"number"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"permissionIds":{"type":"array","items":{"type":"number"}}}}}}},"responses":{"200":{"description":"Permissions assigned successfully."},"400":{"description":"Error assigning permissions."}},"summary":"Assign permissions to a role","tags":["Role"]}},"/role/remove/{id}":{"patch":{"operationId":"RoleController_removePermissions","parameters":[{"name":"id","required":true,"in":"path","description":"Role ID","schema":{"type":"number"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"permissionIds":{"type":"array","items":{"type":"number"}}}}}}},"responses":{"200":{"description":"Permissions removed successfully."},"400":{"description":"Error removing permissions."}},"summary":"Remove permissions from a role","tags":["Role"]}},"/permission/create":{"post":{"operationId":"PermissionController_createPermission","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreatePermissionDto"}}}},"responses":{"201":{"description":"Permission successfully created."},"400":{"description":"Invalid input or error creating permission."}},"summary":"Create a new permission","tags":["Permission"]}},"/permission/get/{id}":{"get":{"operationId":"PermissionController_getPermission","parameters":[{"name":"id","required":true,"in":"path","description":"Permission ID","schema":{"type":"number"}}],"responses":{"200":{"description":"Permission found."},"400":{"description":"Invalid permission ID."},"404":{"description":"Permission not found."}},"summary":"Get a permission by ID","tags":["Permission"]}},"/permission/all":{"get":{"operationId":"PermissionController_getAllPermissions","parameters":[],"responses":{"200":{"description":"List of permissions."},"400":{"description":"Error retrieving permissions."}},"summary":"Get all permissions","tags":["Permission"]}},"/permission/update/{id}":{"patch":{"operationId":"PermissionController_updatePermission","parameters":[{"name":"id","required":true,"in":"path","description":"Permission ID","schema":{"type":"number"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdatePermissionDto"}}}},"responses":{"200":{"description":"Permission updated successfully."},"400":{"description":"Invalid input or error updating permission."}},"summary":"Update a permission by ID","tags":["Permission"]}},"/permission/delete/{id}":{"delete":{"operationId":"PermissionController_deletePermission","parameters":[{"name":"id","required":true,"in":"path","description":"Permission ID","schema":{"type":"number"}}],"responses":{"204":{"description":"Permission deleted successfully."},"400":{"description":"Error deleting permission."}},"summary":"Delete a permission by ID","tags":["Permission"]}},"/hospitals/register":{"post":{"operationId":"HospitalController_registerHospital","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RegisterHospitalDto"}}}},"responses":{"201":{"description":"Hospital registered successfully"},"409":{"description":"Email already in use"}},"summary":"Register a new hospital","tags":["Hospitals"]}},"/hospitals/{id}":{"patch":{"operationId":"HospitalController_updateHospital","parameters":[{"name":"id","required":true,"in":"path","description":"Hospital ID","schema":{"type":"string"}}],"requestBody":{"required":false,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RegisterHospitalDto"}}}},"responses":{"200":{"description":"Hospital updated successfully"},"409":{"description":"Hospital not registered"}},"summary":"Update hospital details","tags":["Hospitals"]},"get":{"operationId":"HospitalController_findHospitalById","parameters":[{"name":"id","required":true,"in":"path","description":"Hospital ID","schema":{"type":"string"}}],"responses":{"200":{"description":"Hospital found"},"400":{"description":"Hospital not found"}},"summary":"Get hospital by ID","tags":["Hospitals"]}},"/hospitals":{"get":{"operationId":"HospitalController_findAllHospital","parameters":[{"name":"search","required":false,"in":"query","description":"Search by name, city, or country","schema":{"type":"string"}},{"name":"city","required":false,"in":"query","schema":{"type":"string"}},{"name":"state","required":false,"in":"query","schema":{"type":"string"}},{"name":"country","required":false,"in":"query","schema":{"type":"string"}},{"name":"isVerified","required":false,"in":"query","schema":{"type":"boolean"}},{"name":"page","required":false,"in":"query","schema":{"type":"number"}},{"name":"limit","required":false,"in":"query","schema":{"type":"number"}}],"responses":{"200":{"description":""}},"summary":"List hospitals with filters and pagination","tags":["Hospitals"]}},"/blood-bank/create":{"post":{"operationId":"BloodBankController_createBloodBank","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateBloodBankDto"}}}},"responses":{"201":{"description":"Blood bank created successfully"},"400":{"description":"Bad Request"}},"summary":"Create a new blood bank","tags":["Blood Bank"]}},"/blood-bank/{id}":{"get":{"operationId":"BloodBankController_getBloodBank","parameters":[{"name":"id","required":true,"in":"path","description":"Blood bank ID","schema":{"type":"string"}}],"responses":{"200":{"description":"Blood bank found"},"404":{"description":"Blood bank not found"}},"summary":"Get a blood bank by ID","tags":["Blood Bank"]}},"/blood-bank/all":{"get":{"operationId":"BloodBankController_getAllBloodBanks","parameters":[{"name":"hospitalId","required":false,"in":"query","description":"Filter by hospital ID","schema":{"type":"string"}}],"responses":{"200":{"description":"List of blood banks"}},"summary":"Get all blood banks","tags":["Blood Bank"]}},"/blood-bank/update/{id}":{"patch":{"operationId":"BloodBankController_updateBloodBank","parameters":[{"name":"id","required":true,"in":"path","description":"Blood bank ID","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateBloodBankDto"}}}},"responses":{"200":{"description":"Blood bank updated successfully"},"400":{"description":"Bad Request"}},"summary":"Update a blood bank","tags":["Blood Bank"]}},"/blood-bank/delete/{id}":{"delete":{"operationId":"BloodBankController_deleteBloodBank","parameters":[{"name":"id","required":true,"in":"path","description":"Blood bank ID","schema":{"type":"string"}}],"responses":{"204":{"description":"Blood bank deleted successfully"},"400":{"description":"Bad Request"}},"summary":"Delete a blood bank","tags":["Blood Bank"]}},"/blood-bank/by-hospital/{hospitalId}":{"get":{"operationId":"BloodBankController_getBloodBanksByHospital","parameters":[{"name":"hospitalId","required":true,"in":"path","description":"Hospital ID","schema":{"type":"string"}}],"responses":{"200":{"description":"List of blood banks for the hospital"}},"summary":"Get blood banks by hospital ID","tags":["Blood Bank"]}}},"info":{"title":"BloodDonor API","description":"The BloodDonor API description","version":"1.0","contact":{}},"tags":[],"servers":[],"components":{"securitySchemes":{"access-token":{"scheme":"Bearer","bearerFormat":"Bearer","description":"Please enter token in following format: Bearer <JWT>","name":"Authorization","type":"http","in":"Header"}},"schemas":{"LoginUserDto":{"type":"object","properties":{"email":{"type":"string","example":"user@example.com","description":"User email address"},"password":{"type":"string","example":"StrongP@ssw0rd","description":"User password"}},"required":["email","password"]},"CreateUserDto":{"type":"object","properties":{"firstName":{"type":"string","example":"John","description":"User first name"},"lastName":{"type":"string","example":"Doe","description":"User last name"},"phoneNumber":{"type":"string","example":"+1234567890","description":"User phone number"},"email":{"type":"string","example":"user@example.com","description":"User email address"},"password":{"type":"string","example":"StrongP@ssw0rd","description":"User password"},"address":{"type":"string","example":"123 Main St","description":"User address"},"age":{"type":"number","example":30,"description":"User age"},"bloodType":{"type":"string","example":"O+","description":"User blood type"},"country":{"type":"string","example":"USA","description":"User country"},"postalCode":{"type":"number","example":12345,"description":"User postal code"},"userType":{"type":"string","enum":["SUPER_ADMIN","DONOR","PATIENT","STAFF"],"description":"User type"},"lastDonationDate":{"format":"date-time","type":"string","example":"2024-01-01","description":"Last donation date"}},"required":["firstName","lastName","phoneNumber","email","password","address","age","country","postalCode","userType"]},"BloodGroupDto":{"type":"object","properties":{"type":{"type":"string","example":"A+","description":"Blood group type"}},"required":["type"]},"CreateRoleDto":{"type":"object","properties":{"roleName":{"type":"string","description":"Name of the role"},"hospitalId":{"type":"string","description":"Associated hospital ID"},"permissions":{"description":"Array of permission IDs assigned to the role","type":"array","items":{"type":"number"}}},"required":["roleName"]},"UpdateRoleDto":{"type":"object","properties":{"roleName":{"type":"string","description":"Updated role name"},"hospitalId":{"type":"string","description":"Updated hospital ID"},"permissions":{"description":"Updated array of permission IDs","type":"array","items":{"type":"number"}}}},"CreatePermissionDto":{"type":"object","properties":{"action":{"type":"string","example":"read","description":"Action name"},"description":{"type":"string","example":"Allows reading data","description":"Description of the permission"}},"required":["action"]},"UpdatePermissionDto":{"type":"object","properties":{"action":{"type":"string","example":"write","description":"Action name"},"description":{"type":"string","example":"Allows writing data","description":"Description of the permission"},"role":{"example":["ADMIN","USER"],"description":"Roles associated with the permission","type":"array","items":{"type":"string"}}}},"RegisterHospitalDto":{"type":"object","properties":{"name":{"type":"string","example":"City Hospital","description":"Name of the hospital"},"address":{"type":"string","example":"123 Main St","description":"Hospital address"},"password":{"type":"string","example":"StrongPass123!","description":"Password for hospital login"},"phoneNumber":{"type":"string","example":"+1234567890","description":"Hospital phone number"},"registrationId":{"type":"string","example":"REG123456","description":"Hospital registration ID"},"isVerified":{"type":"boolean","example":true,"description":"Hospital verification status"},"email":{"type":"string","example":"hospital@example.com","description":"Hospital email address"},"city":{"type":"string","example":"New York","description":"City where the hospital is located"},"state":{"type":"string","example":"NY","description":"State where the hospital is located"},"country":{"type":"string","example":"USA","description":"Country where the hospital is located"},"postalCode":{"type":"string","example":"10001","description":"Postal code of the hospital"}},"required":["name","address","password","phoneNumber","registrationId","isVerified","email","city","state","country","postalCode"]},"CreateBloodBankDto":{"type":"object","properties":{"name":{"type":"string","example":"Red Cross Blood Bank"},"address":{"type":"string","example":"123 Street, City, Country"},"hospitalId":{"type":"string","example":"hospital-uuid-1234"},"phoneNumber":{"type":"string","example":"+1234567890"}},"required":["name","address","hospitalId","phoneNumber"]},"UpdateBloodBankDto":{"type":"object","properties":{"name":{"type":"string","example":"Red Cross Blood Bank - Branch 2"},"address":{"type":"string","example":"456 Avenue, New City, Country"},"hospitalId":{"type":"string","example":"hospital-uuid-5678"},"phoneNumber":{"type":"string","example":"+1987654321"},"hospital":{"$ref":"#/components/schemas/RegisterHospitalDto"}}}}}}